# 分布式锁设计方案

## 设计要点
1. 互斥
2. 过期时间，避免死锁
3. 安全性，不能unlock其他人的锁
4. [高级] 可重入
5. [高级] 主动通知机制


## 主流实现方案

### 基于Redis实现
优点:
- 高性能，高并发场景
- 实现简单
- 可用性高
- 基于`lua`实现CAS

缺点:
- 不支持4,5功能
- 极端场景下,如果master挂了，可能会有两把锁(AP模型)

### 基于Mysql实现
优点:
- 基于`for update`支持主动通知机制
- 能实现1-5功能

缺点:
- 代码实现相对复杂
- 性能低，不适用高并发场景

### 基于Etcd实现
优点:
- 一致性强
- 能实现1-5功能

缺点:
- 性能低，不适用高并发场景
- 可用性低
